Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  filtro.asm  Page 1



1                          ;***************************************************************************
2      
1105   
1106                       ;******************************************************************************
1107   
1108                                 OPT     CEX                               ;Expand DC
1109   
1110   
1111      000000           Left_ch   equ     0
1112   
1113   
1114      000300           CTRL_WD_12 equ    MIN_LEFT_ATTN+MIN_RIGHT_ATTN+LIN2+RIN2
1115      000000           CTRL_WD_34 equ    MIN_LEFT_GAIN+MIN_RIGHT_GAIN
1116   
1117                       ;===========================================================
1118   
1119   
1120   
1121      00FFFF           datin     equ     $ffff                             ;location in Y memory of input file
1122      00FFFE           datout    equ     $fffe                             ;location in Y memory of output file
1123   
1124   
1125   
1126   
1127                       ;========data===========================
1128   
1129   
1130      Y:000000                   org     y:0
1131   
1132                                 include 'coef.txt'                        ;este archivo contiene los coeficientes
1133      000000           coef      equ     *
1134   
1135 d    Y:000000 0000E7            dc      0.000027478
1136 d    Y:000001 000455            dc      0.000132261
1137 d    Y:000002 000608            dc      0.000184067
1138 d    Y:000003 000528            dc      0.000157331
1139 d    Y:000004 0001F7            dc      0.000059908
1140 d    Y:000005 FFFDBF            dc      -0.000068729
1141 d    Y:000006 FFFA52            dc      -0.000173377
1142 d    Y:000007 FFF93A            dc      -0.000206729
1143 d    Y:000008 FFFB10            dc      -0.000150661
1144 d    Y:000009 FFFF29            dc      -0.000025626
1145 d    Y:00000A 0003D2            dc      0.000116543
1146 d    Y:00000B 000703            dc      0.000214036
1147 d    Y:00000C 000745            dc      0.000221872
1148 d    Y:00000D 000458            dc      0.000132509
1149 d    Y:00000E FFFF60            dc      -0.000019128
1150 d    Y:00000F FFFA75            dc      -0.000169122
1151 d    Y:000010 FFF7C3            dc      -0.000251435
1152 d    Y:000011 FFF891            dc      -0.000226900
1153 d    Y:000012 FFFCAB            dc      -0.000101647
1154 d    Y:000013 00026A            dc      0.000073626
1155 d    Y:000014 000757            dc      0.000224050
1156 d    Y:000015 000942            dc      0.000282491
1157 d    Y:000016 000731            dc      0.000219414
1158 d    Y:000017 0001E2            dc      0.000057446
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 2



1159 d    Y:000018 FFFB88            dc      -0.000136398
1160 d    Y:000019 FFF6E1            dc      -0.000278346
1161 d    Y:00001A FFF60A            dc      -0.000303993
1162 d    Y:00001B FFF988            dc      -0.000197390
1163 d    Y:00001C 000000            dc      -0.000000000
1164 d    Y:00001D 0006B9            dc      0.000205213
1165 d    Y:00001E 000AC4            dc      0.000328569
1166 d    Y:00001F 000A40            dc      0.000312779
1167 d    Y:000020 000539            dc      0.000159352
1168 d    Y:000021 FFFDB7            dc      -0.000069778
1169 d    Y:000022 FFF6EB            dc      -0.000277103
1170 d    Y:000023 FFF3D8            dc      -0.000370954
1171 d    Y:000024 FFF5FA            dc      -0.000305927
1172 d    Y:000025 FFFC93            dc      -0.000104541
1173 d    Y:000026 0004EB            dc      0.000150090
1174 d    Y:000027 000B6B            dc      0.000348436
1175 d    Y:000028 000D29            dc      0.000401586
1176 d    Y:000029 000935            dc      0.000280964
1177 d    Y:00002A 000115            dc      0.000033056
1178 d    Y:00002B FFF832            dc      -0.000238234
1179 d    Y:00002C FFF266            dc      -0.000415030
1180 d    Y:00002D FFF259            dc      -0.000416609
1181 d    Y:00002E FFF844            dc      -0.000236070
1182 d    Y:00002F 0001C5            dc      0.000054027
1183 d    Y:000030 000AD6            dc      0.000330635
1184 d    Y:000031 000F7A            dc      0.000472317
1185 d    Y:000032 000D84            dc      0.000412448
1186 d    Y:000033 000594            dc      0.000170269
1187 d    Y:000034 FFFAEF            dc      -0.000154584
1188 d    Y:000035 FFF224            dc      -0.000422921
1189 d    Y:000036 FFEF1B            dc      -0.000515543
1190 d    Y:000037 FFF35A            dc      -0.000386054
1191 d    Y:000038 FFFD43            dc      -0.000083601
1192 d    Y:000039 0008B3            dc      0.000265420
1193 d    Y:00003A 0010B7            dc      0.000510063
1194 d    Y:00003B 0011B2            dc      0.000540009
1195 d    Y:00003C 000AFB            dc      0.000335133
1196 d    Y:00003D FFFF41            dc      -0.000022745
1197 d    Y:00003E FFF379            dc      -0.000382296
1198 d    Y:00003F FFECC8            dc      -0.000586555
1199 d    Y:000040 FFEE43            dc      -0.000541332
1200 d    Y:000041 FFF789            dc      -0.000258381
1201 d    Y:000042 0004CC            dc      0.000146343
1202 d    Y:000043 001062            dc      0.000500020
1203 d    Y:000044 001530            dc      0.000646650
1204 d    Y:000045 0010E6            dc      0.000515718
1205 d    Y:000046 00051A            dc      0.000155676
1206 d    Y:000047 FFF6B6            dc      -0.000283492
1207 d    Y:000048 FFEBED            dc      -0.000612599
1208 d    Y:000049 FFE991            dc      -0.000684633
1209 d    Y:00004A FFF0EB            dc      -0.000460246
1210 d    Y:00004B FFFF13            dc      -0.000028244
1211 d    Y:00004C 000E11            dc      0.000429253
1212 d    Y:00004D 001761            dc      0.000713447
1213 d    Y:00004E 0016C7            dc      0.000695119
1214 d    Y:00004F 000C3A            dc      0.000373126
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 3



1215 d    Y:000050 FFFC07            dc      -0.000121236
1216 d    Y:000051 FFED13            dc      -0.000577535
1217 d    Y:000052 FFE5EE            dc      -0.000795649
1218 d    Y:000053 FFE9EF            dc      -0.000673376
1219 d    Y:000054 FFF7AE            dc      -0.000253934
1220 d    Y:000055 000975            dc      0.000288581
1221 d    Y:000056 0017A2            dc      0.000721269
1222 d    Y:000057 001BED            dc      0.000852269
1223 d    Y:000058 00142C            dc      0.000615643
1224 d    Y:000059 000367            dc      0.000103812
1225 d    Y:00005A FFF0A9            dc      -0.000468128
1226 d    Y:00005B FFE410            dc      -0.000852632
1227 d    Y:00005C FFE346            dc      -0.000876696
1228 d    Y:00005D FFEEFB            dc      -0.000519442
1229 d    Y:00005E 000270            dc      0.000074401
1230 d    Y:00005F 001564            dc      0.000652830
1231 d    Y:000060 001F91            dc      0.000963347
1232 d    Y:000061 001C47            dc      0.000863010
1233 d    Y:000062 000C94            dc      0.000383854
1234 d    Y:000063 FFF6F4            dc      -0.000276096
1235 d    Y:000064 FFE4A8            dc      -0.000834428
1236 d    Y:000065 FFDDC2            dc      -0.001045025
1237 d    Y:000066 FFE594            dc      -0.000806351
1238 d    Y:000067 FFF920            dc      -0.000209758
1239 d    Y:000068 001038            dc      0.000494903
1240 d    Y:000069 0020E4            dc      0.001003705
1241 d    Y:00006A 0023B4            dc      0.001089557
1242 d    Y:00006B 00170C            dc      0.000703282
1243 d    Y:00006C 000000            dc      0.000000000
1244 d    Y:00006D FFE851            dc      -0.000722780
1245 d    Y:00006E FFDA4A            dc      -0.001150809
1246 d    Y:00006F FFDC4C            dc      -0.001089528
1247 d    Y:000070 FFEDE8            dc      -0.000552120
1248 d    Y:000071 0007E1            dc      0.000240500
1249 d    Y:000072 001F23            dc      0.000950190
1250 d    Y:000073 002979            dc      0.001265629
1251 d    Y:000074 002209            dc      0.001038645
1252 d    Y:000075 000B93            dc      0.000353220
1253 d    Y:000076 FFEF76            dc      -0.000504736
1254 d    Y:000077 FFD9C8            dc      -0.001166366
1255 d    Y:000078 FFD426            dc      -0.001338235
1256 d    Y:000079 FFE174            dc      -0.000932159
1257 d    Y:00007A FFFC6C            dc      -0.000109199
1258 d    Y:00007B 0019AE            dc      0.000783684
1259 d    Y:00007C 002C8E            dc      0.001359654
1260 d    Y:00007D 002C8B            dc      0.001359344
1261 d    Y:00007E 001924            dc      0.000767247
1262 d    Y:00007F FFFA45            dc      -0.000174918
1263 d    Y:000080 FFDD0E            dc      -0.001066476
1264 d    Y:000081 FFCE43            dc      -0.001517921
1265 d    Y:000082 FFD4B8            dc      -0.001320803
1266 d    Y:000083 FFEE32            dc      -0.000543371
1267 d    Y:000084 00101C            dc      0.000491649
1268 d    Y:000085 002BEE            dc      0.001340661
1269 d    Y:000086 003561            dc      0.001629039
1270 d    Y:000087 0027D9            dc      0.001216072
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 4



1271 d    Y:000088 00089A            dc      0.000262546
1272 d    Y:000089 FFE4C4            dc      -0.000831091
1273 d    Y:00008A FFCBD1            dc      -0.001592561
1274 d    Y:00008B FFC8E7            dc      -0.001681390
1275 d    Y:00008C FFDDE6            dc      -0.001040679
1276 d    Y:00008D 00024F            dc      0.000070447
1277 d    Y:00008E 0026B3            dc      0.001181066
1278 d    Y:00008F 003B3C            dc      0.001807699
1279 d    Y:000090 00368A            dc      0.001664411
1280 d    Y:000091 0019F9            dc      0.000792637
1281 d    Y:000092 FFF152            dc      -0.000447959
1282 d    Y:000093 FFCDF3            dc      -0.001527371
1283 d    Y:000094 FFBF67            dc      -0.001971305
1284 d    Y:000095 FFCC95            dc      -0.001569137
1285 d    Y:000096 FFF082            dc      -0.000472794
1286 d    Y:000097 001C2A            dc      0.000859465
1287 d    Y:000098 003CC2            dc      0.001854122
1288 d    Y:000099 0043CB            dc      0.002068864
1289 d    Y:00009A 002D81            dc      0.001388719
1290 d    Y:00009B 0002CA            dc      0.000085102
1291 d    Y:00009C FFD5AD            dc      -0.001291663
1292 d    Y:00009D FFB9BD            dc      -0.002144178
1293 d    Y:00009E FFBBA0            dc      -0.002086698
1294 d    Y:00009F FFDB56            dc      -0.001118910
1295 d    Y:0000A0 000BE7            dc      0.000363203
1296 d    Y:0000A1 0038A5            dc      0.001728678
1297 d    Y:0000A2 004DFA            dc      0.002379654
1298 d    Y:0000A3 0041F2            dc      0.002012548
1299 d    Y:0000A4 0018DB            dc      0.000758484
1300 d    Y:0000A5 FFE3C5            dc      -0.000861530
1301 d    Y:0000A6 FFB979            dc      -0.002152370
1302 d    Y:0000A7 FFACB0            dc      -0.002542467
1303 d    Y:0000A8 FFC3D5            dc      -0.001836151
1304 d    Y:0000A9 FFF5DB            dc      -0.000309578
1305 d    Y:0000AA 002DBE            dc      0.001395960
1306 d    Y:0000AB 005352            dc      0.002542721
1307 d    Y:0000AC 0055B0            dc      0.002614923
1308 d    Y:0000AD 0032C8            dc      0.001549759
1309 d    Y:0000AE FFF8B9            dc      -0.000222059
1310 d    Y:0000AF FFC01F            dc      -0.001949386
1311 d    Y:0000B0 FFA1AF            dc      -0.002878297
1312 d    Y:0000B1 FFAB73            dc      -0.002580303
1313 d    Y:0000B2 FFDA5D            dc      -0.001148607
1314 d    Y:0000B3 001B19            dc      0.000826922
1315 d    Y:0000B4 0051FA            dc      0.002501735
1316 d    Y:0000B5 0066C9            dc      0.003136742
1317 d    Y:0000B6 004F69            dc      0.002423412
1318 d    Y:0000B7 0014B0            dc      0.000631284
1319 d    Y:0000B8 FFCF1F            dc      -0.001491708
1320 d    Y:0000B9 FF9CB4            dc      -0.003030273
1321 d    Y:0000BA FF9405            dc      -0.003295286
1322 d    Y:0000BB FFBA2B            dc      -0.002131070
1323 d    Y:0000BC 000000            dc      -0.000000000
1324 d    Y:0000BD 004812            dc      0.002199376
1325 d    Y:0000BE 007304            dc      0.003509946
1326 d    Y:0000BF 006D28            dc      0.003331206
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 5



1327 d    Y:0000C0 003776            dc      0.001692492
1328 d    Y:0000C1 FFE7C7            dc      -0.000739272
1329 d    Y:0000C2 FFA003            dc      -0.002929285
1330 d    Y:0000C3 FF7FC1            dc      -0.003913713
1331 d    Y:0000C4 FF966A            dc      -0.003222197
1332 d    Y:0000C5 FFDBF9            dc      -0.001099524
1333 d    Y:0000C6 0033AB            dc      0.001576787
1334 d    Y:0000C7 0077D8            dc      0.003657380
1335 d    Y:0000C8 008A0C            dc      0.004212816
1336 d    Y:0000C9 00608E            dc      0.002946566
1337 d    Y:0000CA 000B5C            dc      0.000346670
1338 d    Y:0000CB FFAE1C            dc      -0.002499156
1339 d    Y:0000CC FF7140            dc      -0.004356382
1340 d    Y:0000CD FF7094            dc      -0.004376874
1341 d    Y:0000CE FFAEA2            dc      -0.002483144
1342 d    Y:0000CF 0012A6            dc      0.000569156
1343 d    Y:0000D0 007259            dc      0.003489618
1344 d    Y:0000D1 00A3B4            dc      0.004995879
1345 d    Y:0000D2 008F51            dc      0.004373659
1346 d    Y:0000D3 003B56            dc      0.001810754
1347 d    Y:0000D4 FFC9F5            dc      -0.001649270
1348 d    Y:0000D5 FF6B9D            dc      -0.004528447
1349 d    Y:0000D6 FF4A65            dc      -0.005542186
1350 d    Y:0000D7 FF776A            dc      -0.004168298
1351 d    Y:0000D8 FFE248            dc      -0.000906966
1352 d    Y:0000D9 005ED8            dc      0.002894412
1353 d    Y:0000DA 00B749            dc      0.005593476
1354 d    Y:0000DB 00C339            dc      0.005957737
1355 d    Y:0000DC 0079F2            dc      0.003721491
1356 d    Y:0000DD FFF7AA            dc      -0.000254340
1357 d    Y:0000DE FF72E0            dc      -0.004306831
1358 d    Y:0000DF FF25BE            dc      -0.006660732
1359 d    Y:0000E0 FF34DA            dc      -0.006199551
1360 d    Y:0000E1 FF9E28            dc      -0.002985923
1361 d    Y:0000E2 0037F3            dc      0.001707489
1362 d    Y:0000E3 00C121            dc      0.005893884
1363 d    Y:0000E4 00FC7C            dc      0.007705155
1364 d    Y:0000E5 00CBAF            dc      0.006215914
1365 d    Y:0000E6 003E3C            dc      0.001899293
1366 d    Y:0000E7 FF8D33            dc      -0.003503466
1367 d    Y:0000E8 FF0486            dc      -0.007674452
1368 d    Y:0000E9 FEE2E0            dc      -0.008701376
1369 d    Y:0000EA FF3D61            dc      -0.005939407
1370 d    Y:0000EB FFF3DD            dc      -0.000370416
1371 d    Y:0000EC 00BBA5            dc      0.005726444
1372 d    Y:0000ED 013D90            dc      0.009691218
1373 d    Y:0000EE 013B60            dc      0.009624527
1374 d    Y:0000EF 00ACC0            dc      0.005271910
1375 d    Y:0000F0 FFC6A7            dc      -0.001750085
1376 d    Y:0000F1 FEE888            dc      -0.008528670
1377 d    Y:0000F2 FE7597            dc      -0.012036502
1378 d    Y:0000F3 FEA98A            dc      -0.010451047
1379 d    Y:0000F4 FF7B4B            dc      -0.004049917
1380 d    Y:0000F5 009B3F            dc      0.004737775
1381 d    Y:0000F6 01902F            dc      0.012212634
1382 d    Y:0000F7 01E8B4            dc      0.014914058
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 6



1383 d    Y:0000F8 016DAC            dc      0.011159465
1384 d    Y:0000F9 004008            dc      0.001954096
1385 d    Y:0000FA FED352            dc      -0.009176012
1386 d    Y:0000FB FDC3F3            dc      -0.017457600
1387 d    Y:0000FC FD9776            dc      -0.018815329
1388 d    Y:0000FD FE7F98            dc      -0.011731117
1389 d    Y:0000FE 003A33            dc      0.001776053
1390 d    Y:0000FF 021E87            dc      0.016556609
1391 d    Y:000100 03579C            dc      0.026111132
1392 d    Y:000101 0338E8            dc      0.025174170
1393 d    Y:000102 018E28            dc      0.012150783
1394 d    Y:000103 FEC616            dc      -0.009579872
1395 d    Y:000104 FBE317            dc      -0.032132250
1396 d    Y:000105 FA3151            dc      -0.045370040
1397 d    Y:000106 FAD7BF            dc      -0.040290990
1398 d    Y:000107 FE6971            dc      -0.012407199
1399 d    Y:000108 049ED4            dc      0.036097073
1400 d    Y:000109 0C5336            dc      0.096289363
1401 d    Y:00010A 13CC09            dc      0.154664146
1402 d    Y:00010B 1935DF            dc      0.196956545
1403 d    Y:00010C 1B2F8D            dc      0.212388619
1404 d    Y:00010D 1935DF            dc      0.196956545
1405 d    Y:00010E 13CC09            dc      0.154664146
1406 d    Y:00010F 0C5336            dc      0.096289363
1407 d    Y:000110 049ED4            dc      0.036097073
1408 d    Y:000111 FE6971            dc      -0.012407199
1409 d    Y:000112 FAD7BF            dc      -0.040290990
1410 d    Y:000113 FA3151            dc      -0.045370040
1411 d    Y:000114 FBE317            dc      -0.032132250
1412 d    Y:000115 FEC616            dc      -0.009579872
1413 d    Y:000116 018E28            dc      0.012150783
1414 d    Y:000117 0338E8            dc      0.025174170
1415 d    Y:000118 03579C            dc      0.026111132
1416 d    Y:000119 021E87            dc      0.016556609
1417 d    Y:00011A 003A33            dc      0.001776053
1418 d    Y:00011B FE7F98            dc      -0.011731117
1419 d    Y:00011C FD9776            dc      -0.018815329
1420 d    Y:00011D FDC3F3            dc      -0.017457600
1421 d    Y:00011E FED352            dc      -0.009176012
1422 d    Y:00011F 004008            dc      0.001954096
1423 d    Y:000120 016DAC            dc      0.011159465
1424 d    Y:000121 01E8B4            dc      0.014914058
1425 d    Y:000122 01902F            dc      0.012212634
1426 d    Y:000123 009B3F            dc      0.004737775
1427 d    Y:000124 FF7B4B            dc      -0.004049917
1428 d    Y:000125 FEA98A            dc      -0.010451047
1429 d    Y:000126 FE7597            dc      -0.012036502
1430 d    Y:000127 FEE888            dc      -0.008528670
1431 d    Y:000128 FFC6A7            dc      -0.001750085
1432 d    Y:000129 00ACC0            dc      0.005271910
1433 d    Y:00012A 013B60            dc      0.009624527
1434 d    Y:00012B 013D90            dc      0.009691218
1435 d    Y:00012C 00BBA5            dc      0.005726444
1436 d    Y:00012D FFF3DD            dc      -0.000370416
1437 d    Y:00012E FF3D61            dc      -0.005939407
1438 d    Y:00012F FEE2E0            dc      -0.008701376
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 7



1439 d    Y:000130 FF0486            dc      -0.007674452
1440 d    Y:000131 FF8D33            dc      -0.003503466
1441 d    Y:000132 003E3C            dc      0.001899293
1442 d    Y:000133 00CBAF            dc      0.006215914
1443 d    Y:000134 00FC7C            dc      0.007705155
1444 d    Y:000135 00C121            dc      0.005893884
1445 d    Y:000136 0037F3            dc      0.001707489
1446 d    Y:000137 FF9E28            dc      -0.002985923
1447 d    Y:000138 FF34DA            dc      -0.006199551
1448 d    Y:000139 FF25BE            dc      -0.006660732
1449 d    Y:00013A FF72E0            dc      -0.004306831
1450 d    Y:00013B FFF7AA            dc      -0.000254340
1451 d    Y:00013C 0079F2            dc      0.003721491
1452 d    Y:00013D 00C339            dc      0.005957737
1453 d    Y:00013E 00B749            dc      0.005593476
1454 d    Y:00013F 005ED8            dc      0.002894412
1455 d    Y:000140 FFE248            dc      -0.000906966
1456 d    Y:000141 FF776A            dc      -0.004168298
1457 d    Y:000142 FF4A65            dc      -0.005542186
1458 d    Y:000143 FF6B9D            dc      -0.004528447
1459 d    Y:000144 FFC9F5            dc      -0.001649270
1460 d    Y:000145 003B56            dc      0.001810754
1461 d    Y:000146 008F51            dc      0.004373659
1462 d    Y:000147 00A3B4            dc      0.004995879
1463 d    Y:000148 007259            dc      0.003489618
1464 d    Y:000149 0012A6            dc      0.000569156
1465 d    Y:00014A FFAEA2            dc      -0.002483144
1466 d    Y:00014B FF7094            dc      -0.004376874
1467 d    Y:00014C FF7140            dc      -0.004356382
1468 d    Y:00014D FFAE1C            dc      -0.002499156
1469 d    Y:00014E 000B5C            dc      0.000346670
1470 d    Y:00014F 00608E            dc      0.002946566
1471 d    Y:000150 008A0C            dc      0.004212816
1472 d    Y:000151 0077D8            dc      0.003657380
1473 d    Y:000152 0033AB            dc      0.001576787
1474 d    Y:000153 FFDBF9            dc      -0.001099524
1475 d    Y:000154 FF966A            dc      -0.003222197
1476 d    Y:000155 FF7FC1            dc      -0.003913713
1477 d    Y:000156 FFA003            dc      -0.002929285
1478 d    Y:000157 FFE7C7            dc      -0.000739272
1479 d    Y:000158 003776            dc      0.001692492
1480 d    Y:000159 006D28            dc      0.003331206
1481 d    Y:00015A 007304            dc      0.003509946
1482 d    Y:00015B 004812            dc      0.002199376
1483 d    Y:00015C 000000            dc      -0.000000000
1484 d    Y:00015D FFBA2B            dc      -0.002131070
1485 d    Y:00015E FF9405            dc      -0.003295286
1486 d    Y:00015F FF9CB4            dc      -0.003030273
1487 d    Y:000160 FFCF1F            dc      -0.001491708
1488 d    Y:000161 0014B0            dc      0.000631284
1489 d    Y:000162 004F69            dc      0.002423412
1490 d    Y:000163 0066C9            dc      0.003136742
1491 d    Y:000164 0051FA            dc      0.002501735
1492 d    Y:000165 001B19            dc      0.000826922
1493 d    Y:000166 FFDA5D            dc      -0.001148607
1494 d    Y:000167 FFAB73            dc      -0.002580303
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 8



1495 d    Y:000168 FFA1AF            dc      -0.002878297
1496 d    Y:000169 FFC01F            dc      -0.001949386
1497 d    Y:00016A FFF8B9            dc      -0.000222059
1498 d    Y:00016B 0032C8            dc      0.001549759
1499 d    Y:00016C 0055B0            dc      0.002614923
1500 d    Y:00016D 005352            dc      0.002542721
1501 d    Y:00016E 002DBE            dc      0.001395960
1502 d    Y:00016F FFF5DB            dc      -0.000309578
1503 d    Y:000170 FFC3D5            dc      -0.001836151
1504 d    Y:000171 FFACB0            dc      -0.002542467
1505 d    Y:000172 FFB979            dc      -0.002152370
1506 d    Y:000173 FFE3C5            dc      -0.000861530
1507 d    Y:000174 0018DB            dc      0.000758484
1508 d    Y:000175 0041F2            dc      0.002012548
1509 d    Y:000176 004DFA            dc      0.002379654
1510 d    Y:000177 0038A5            dc      0.001728678
1511 d    Y:000178 000BE7            dc      0.000363203
1512 d    Y:000179 FFDB56            dc      -0.001118910
1513 d    Y:00017A FFBBA0            dc      -0.002086698
1514 d    Y:00017B FFB9BD            dc      -0.002144178
1515 d    Y:00017C FFD5AD            dc      -0.001291663
1516 d    Y:00017D 0002CA            dc      0.000085102
1517 d    Y:00017E 002D81            dc      0.001388719
1518 d    Y:00017F 0043CB            dc      0.002068864
1519 d    Y:000180 003CC2            dc      0.001854122
1520 d    Y:000181 001C2A            dc      0.000859465
1521 d    Y:000182 FFF082            dc      -0.000472794
1522 d    Y:000183 FFCC95            dc      -0.001569137
1523 d    Y:000184 FFBF67            dc      -0.001971305
1524 d    Y:000185 FFCDF3            dc      -0.001527371
1525 d    Y:000186 FFF152            dc      -0.000447959
1526 d    Y:000187 0019F9            dc      0.000792637
1527 d    Y:000188 00368A            dc      0.001664411
1528 d    Y:000189 003B3C            dc      0.001807699
1529 d    Y:00018A 0026B3            dc      0.001181066
1530 d    Y:00018B 00024F            dc      0.000070447
1531 d    Y:00018C FFDDE6            dc      -0.001040679
1532 d    Y:00018D FFC8E7            dc      -0.001681390
1533 d    Y:00018E FFCBD1            dc      -0.001592561
1534 d    Y:00018F FFE4C4            dc      -0.000831091
1535 d    Y:000190 00089A            dc      0.000262546
1536 d    Y:000191 0027D9            dc      0.001216072
1537 d    Y:000192 003561            dc      0.001629039
1538 d    Y:000193 002BEE            dc      0.001340661
1539 d    Y:000194 00101C            dc      0.000491649
1540 d    Y:000195 FFEE32            dc      -0.000543371
1541 d    Y:000196 FFD4B8            dc      -0.001320803
1542 d    Y:000197 FFCE43            dc      -0.001517921
1543 d    Y:000198 FFDD0E            dc      -0.001066476
1544 d    Y:000199 FFFA45            dc      -0.000174918
1545 d    Y:00019A 001924            dc      0.000767247
1546 d    Y:00019B 002C8B            dc      0.001359344
1547 d    Y:00019C 002C8E            dc      0.001359654
1548 d    Y:00019D 0019AE            dc      0.000783684
1549 d    Y:00019E FFFC6C            dc      -0.000109199
1550 d    Y:00019F FFE174            dc      -0.000932159
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 9



1551 d    Y:0001A0 FFD426            dc      -0.001338235
1552 d    Y:0001A1 FFD9C8            dc      -0.001166366
1553 d    Y:0001A2 FFEF76            dc      -0.000504736
1554 d    Y:0001A3 000B93            dc      0.000353220
1555 d    Y:0001A4 002209            dc      0.001038645
1556 d    Y:0001A5 002979            dc      0.001265629
1557 d    Y:0001A6 001F23            dc      0.000950190
1558 d    Y:0001A7 0007E1            dc      0.000240500
1559 d    Y:0001A8 FFEDE8            dc      -0.000552120
1560 d    Y:0001A9 FFDC4C            dc      -0.001089528
1561 d    Y:0001AA FFDA4A            dc      -0.001150809
1562 d    Y:0001AB FFE851            dc      -0.000722780
1563 d    Y:0001AC 000000            dc      0.000000000
1564 d    Y:0001AD 00170C            dc      0.000703282
1565 d    Y:0001AE 0023B4            dc      0.001089557
1566 d    Y:0001AF 0020E4            dc      0.001003705
1567 d    Y:0001B0 001038            dc      0.000494903
1568 d    Y:0001B1 FFF920            dc      -0.000209758
1569 d    Y:0001B2 FFE594            dc      -0.000806351
1570 d    Y:0001B3 FFDDC2            dc      -0.001045025
1571 d    Y:0001B4 FFE4A8            dc      -0.000834428
1572 d    Y:0001B5 FFF6F4            dc      -0.000276096
1573 d    Y:0001B6 000C94            dc      0.000383854
1574 d    Y:0001B7 001C47            dc      0.000863010
1575 d    Y:0001B8 001F91            dc      0.000963347
1576 d    Y:0001B9 001564            dc      0.000652830
1577 d    Y:0001BA 000270            dc      0.000074401
1578 d    Y:0001BB FFEEFB            dc      -0.000519442
1579 d    Y:0001BC FFE346            dc      -0.000876696
1580 d    Y:0001BD FFE410            dc      -0.000852632
1581 d    Y:0001BE FFF0A9            dc      -0.000468128
1582 d    Y:0001BF 000367            dc      0.000103812
1583 d    Y:0001C0 00142C            dc      0.000615643
1584 d    Y:0001C1 001BED            dc      0.000852269
1585 d    Y:0001C2 0017A2            dc      0.000721269
1586 d    Y:0001C3 000975            dc      0.000288581
1587 d    Y:0001C4 FFF7AE            dc      -0.000253934
1588 d    Y:0001C5 FFE9EF            dc      -0.000673376
1589 d    Y:0001C6 FFE5EE            dc      -0.000795649
1590 d    Y:0001C7 FFED13            dc      -0.000577535
1591 d    Y:0001C8 FFFC07            dc      -0.000121236
1592 d    Y:0001C9 000C3A            dc      0.000373126
1593 d    Y:0001CA 0016C7            dc      0.000695119
1594 d    Y:0001CB 001761            dc      0.000713447
1595 d    Y:0001CC 000E11            dc      0.000429253
1596 d    Y:0001CD FFFF13            dc      -0.000028244
1597 d    Y:0001CE FFF0EB            dc      -0.000460246
1598 d    Y:0001CF FFE991            dc      -0.000684633
1599 d    Y:0001D0 FFEBED            dc      -0.000612599
1600 d    Y:0001D1 FFF6B6            dc      -0.000283492
1601 d    Y:0001D2 00051A            dc      0.000155676
1602 d    Y:0001D3 0010E6            dc      0.000515718
1603 d    Y:0001D4 001530            dc      0.000646650
1604 d    Y:0001D5 001062            dc      0.000500020
1605 d    Y:0001D6 0004CC            dc      0.000146343
1606 d    Y:0001D7 FFF789            dc      -0.000258381
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 10



1607 d    Y:0001D8 FFEE43            dc      -0.000541332
1608 d    Y:0001D9 FFECC8            dc      -0.000586555
1609 d    Y:0001DA FFF379            dc      -0.000382296
1610 d    Y:0001DB FFFF41            dc      -0.000022745
1611 d    Y:0001DC 000AFB            dc      0.000335133
1612 d    Y:0001DD 0011B2            dc      0.000540009
1613 d    Y:0001DE 0010B7            dc      0.000510063
1614 d    Y:0001DF 0008B3            dc      0.000265420
1615 d    Y:0001E0 FFFD43            dc      -0.000083601
1616 d    Y:0001E1 FFF35A            dc      -0.000386054
1617 d    Y:0001E2 FFEF1B            dc      -0.000515543
1618 d    Y:0001E3 FFF224            dc      -0.000422921
1619 d    Y:0001E4 FFFAEF            dc      -0.000154584
1620 d    Y:0001E5 000594            dc      0.000170269
1621 d    Y:0001E6 000D84            dc      0.000412448
1622 d    Y:0001E7 000F7A            dc      0.000472317
1623 d    Y:0001E8 000AD6            dc      0.000330635
1624 d    Y:0001E9 0001C5            dc      0.000054027
1625 d    Y:0001EA FFF844            dc      -0.000236070
1626 d    Y:0001EB FFF259            dc      -0.000416609
1627 d    Y:0001EC FFF266            dc      -0.000415030
1628 d    Y:0001ED FFF832            dc      -0.000238234
1629 d    Y:0001EE 000115            dc      0.000033056
1630 d    Y:0001EF 000935            dc      0.000280964
1631 d    Y:0001F0 000D29            dc      0.000401586
1632 d    Y:0001F1 000B6B            dc      0.000348436
1633 d    Y:0001F2 0004EB            dc      0.000150090
1634 d    Y:0001F3 FFFC93            dc      -0.000104541
1635 d    Y:0001F4 FFF5FA            dc      -0.000305927
1636 d    Y:0001F5 FFF3D8            dc      -0.000370954
1637 d    Y:0001F6 FFF6EB            dc      -0.000277103
1638 d    Y:0001F7 FFFDB7            dc      -0.000069778
1639 d    Y:0001F8 000539            dc      0.000159352
1640 d    Y:0001F9 000A40            dc      0.000312779
1641 d    Y:0001FA 000AC4            dc      0.000328569
1642 d    Y:0001FB 0006B9            dc      0.000205213
1643 d    Y:0001FC 000000            dc      -0.000000000
1644 d    Y:0001FD FFF988            dc      -0.000197390
1645 d    Y:0001FE FFF60A            dc      -0.000303993
1646 d    Y:0001FF FFF6E1            dc      -0.000278346
1647 d    Y:000200 FFFB88            dc      -0.000136398
1648 d    Y:000201 0001E2            dc      0.000057446
1649 d    Y:000202 000731            dc      0.000219414
1650 d    Y:000203 000942            dc      0.000282491
1651 d    Y:000204 000757            dc      0.000224050
1652 d    Y:000205 00026A            dc      0.000073626
1653 d    Y:000206 FFFCAB            dc      -0.000101647
1654 d    Y:000207 FFF891            dc      -0.000226900
1655 d    Y:000208 FFF7C3            dc      -0.000251435
1656 d    Y:000209 FFFA75            dc      -0.000169122
1657 d    Y:00020A FFFF60            dc      -0.000019128
1658 d    Y:00020B 000458            dc      0.000132509
1659 d    Y:00020C 000745            dc      0.000221872
1660 d    Y:00020D 000703            dc      0.000214036
1661 d    Y:00020E 0003D2            dc      0.000116543
1662 d    Y:00020F FFFF29            dc      -0.000025626
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  coef.txt  Page 11



1663 d    Y:000210 FFFB10            dc      -0.000150661
1664 d    Y:000211 FFF93A            dc      -0.000206729
1665 d    Y:000212 FFFA52            dc      -0.000173377
1666 d    Y:000213 FFFDBF            dc      -0.000068729
1667 d    Y:000214 0001F7            dc      0.000059908
1668 d    Y:000215 000528            dc      0.000157331
1669 d    Y:000216 000608            dc      0.000184067
1670 d    Y:000217 000455            dc      0.000132261
1671 d    Y:000218 0000E7            dc      0.000027478
1672   
1673   
1674      000219           ntaps     equ     537
1675   
1676   
1677      X:000000                   org     x:0
1678   
1679      X:000000         bits      ds      1
1680      X:000400         states    dsm     ntaps                             ;filter states
1681   
1682   
1683   
1684      000619           endtap    equ     *
1685   
1686   
1687      P:000100                   org     p:$100
1688                       START
1689                       main
1690      P:000100 08F4BD            movep             #$040006,x:M_PCTL       ; PLL 7 X 12.288 = 86.016MHz
                   040006
1691      P:000102 0003F8            ori     #3,mr                             ; mask interrupts
1692      P:000103 0500BB            movec             #0,sp                   ; clear hardware stack pointer
1693      P:000104 0500BA            move              #0,omr                  ; operating mode 0
1694   
1695                       ;==================
1696   
1697      P:000105 240000            move              #0,X0
1698      P:000106 440000            move              X0,x:bits
1699   
1700   
1701   
1702      P:000107 60F400  inifil    move              #states,r0              ;point to filter states
                   000400
1703      P:000109 05F420            move              #ntaps-1,m0             ;mod(ntaps)
                   000218
1704      P:00010B 340000            move              #coef,r4                ;point to filter coefficients
1705      P:00010C 05F424            move              #ntaps-1,m4             ;mod(ntaps), nro. de coeficientes
                   000218
1706   
1707                       ;========================================
1708   
1709   
1710                       ;=====================================
1711                       ;      Inicializo port b for test
1712                       ;=====================================
1713   
1714      P:00010E 08F484            movep             #$0001,X:M_HPCR         ;Port B I/O mode select
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  filtro.asm  Page 12



                   000001
1715      P:000110 08F488            movep             #$0001,X:M_HDDR         ;PB0 out
                   000001
1716   
1717   
1718   
1719                       ;========================================
1720   
1721      P:000112 0BF080            jsr     ada_init                          ;initialize codec
                   000115
1722   
1723      P:000114 0C0114            jmp     *                                 ;take a nap
1724   
1725                                 include 'ada_init.asm'                    ;used to include codec initialization routines
1726                                 page    132,60
1727                       ;**************************************************************************
1728                       ;       ADA_INIT.ASM    Ver 1.2
1729                       ;       Example program to initialize the CS4218
1730                       ;
1731                       ;       Copyright (c) MOTOROLA 1995, 1996, 1997, 1998
1732                       ;                     Semiconductor Products Sector
1733                       ;                     Wireless Signal Processing Division
1734                       ;
1735                       ;       History:
1736                       ;                       14 June 1996:  RLR/LJD - ver 1.0
1737                       ;                       21 July 1997:  BEA     - ver 1.1
1738                       ;                       23 Sept 1998:  TTL     - ver 1.2
1739                       ;**************************************************************************
1740      X:000619                   org     x:
1741   
1742                       ; Codec control constants
1743      X:000619         CTRL_WD_HI ds     1
1744      X:00061A         CTRL_WD_LO ds     1
1745   
1746   
1747                       ; GPIO  pin constants
1748   
1749                                                                           ; ESSI0 - audio data GPIO mode
1750                                                                           ; DSP                   CODEC
1751                                                                           ; ---------------------------
1752                       CODEC_RESET
1753      000000                     equ     0                                 ; bit0  SC00    --->    CODEC_RESET~
1754   
1755                                                                           ; ESSI1 - control data GPIO Mode
1756                                                                           ; DSP                   CODEC
1757                                                                           ;----------------------------
1758      000000           CCS       equ     0                                 ; bit0  SC10    --->    CCS~
1759      000001           CCLK      equ     1                                 ; bit1  SC11    --->    CCLK
1760      000002           CDIN      equ     2                                 ; bit2  SC12    --->    CDIN
1761   
1762                       ;**************************************************************************
1763                       ; Initialize the CS4218 codec
1764                       ; ---------------------------
1765                       ; Serial Mode 4 (SM4), DSP Slave/Codec Master, 32-bits per frame
1766                       ;
1767                       ; After a reset, the control port must be written once to initialize it
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 13



1768                       ; if the port will be accessed to read or write control bits.  The initial
1769                       ; write is a "dummy" write since the data is ignored by the codec.  A second
1770                       ; write is needed to configure the codec as desired.  Then, the control port
1771                       ; only needs to be written to when a change is desired, or to obtain status
1772                       ; information.
1773                       ;
1774                       ; Although only 23 bits contain useful data in CDIN, a minimum of 31 bits
1775                       ; must be written.
1776                       ;
1777                       ; CDIN
1778                       ;------------------------------------------------
1779                       ; bit 31                0
1780                       ;------------------------------------------------
1781                       ; bit 30                mask interrupt
1782                       ;                       0=no mask on MF5:\INT pin
1783                       ;                       1=mask on MF5:\INT pin
1784                       ;------------------------------------------------
1785                       ; bit 29                DO1
1786                       ;------------------------------------------------
1787                       ; bits 28-24            left output D/A sttenuation  (1.5dB steps)
1788                       ;                       00000=No attenuation 0dB
1789                       ;                       11111=Max attenuation -46.5dB
1790                       ;------------------------------------------------
1791                       ; bits 23-19            right output D/A attenuation (1.5dB steps)
1792                       ;                       00000=No attenuation 0dB
1793                       ;                       11111=Max attenuation -46.5dB
1794                       ;------------------------------------------------
1795                       ; bit 18                mute D/A outputs
1796                       ;                       0=outputs ON
1797                       ;                       1=outputs MUTED
1798                       ;------------------------------------------------
1799                       ; bit 17                input mux, left select
1800                       ;                       0=RIN1
1801                       ;                       1=RIN2 (used on EVM)
1802                       ;------------------------------------------------
1803                       ; bit 16                input mux, right select
1804                       ;                       0=LIN1
1805                       ;                       1=LIN2 (used on EVM)
1806                       ;------------------------------------------------
1807                       ; bits 15-12            left input A/D gain (1.5dB steps)
1808                       ;                       0000=No gain 0dB
1809                       ;                       1111=Max gain +22.5dB
1810                       ;------------------------------------------------
1811                       ; bits 11-8             right input A/D gain (1.5dB steps)
1812                       ;                       0000=No gain 0dB
1813                       ;                       1111=Max gain +22.5dB
1814                       ;------------------------------------------------
1815                       ; bits 7-0              00000000
1816                       ;------------------------------------------------
1817                       ;**************************************************************************
1818   
1819   
1820      P:000115                   org     p:
1821                       ada_init
1822   
1823                                                                           ; reset ESSI ports
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 14



1824      P:000115 07F43F            movep             #$0000,x:M_PCRC         ; reset ESSI0 port
                   000000
1825      P:000117 07F42F            movep             #$0000,x:M_PCRD         ; reset ESSI1 port
                   000000
1826   
1827                                                                           ; Set Control Register A and B
1828      P:000119 07F435            movep             #$101807,x:M_CRA0       ; 12.288MHz/16 = 768KHz SCLK
                   101807
1829                                                                           ; prescale modulus = 8
1830                                                                           ; frame rate divider = 2
1831                                                                           ; 16-bits per word
1832                                                                           ; 32-bits per frame
1833                                                                           ; 16-bit data aligned to bit 23
1834   
1835      P:00011B 07F436            movep             #$ff330c,x:M_CRB0       ; Enable REIE,TEIE,RLIE,TLIE,
                   FF330C
1836                                                                           ; RIE,TIE,RE,TE0
1837                                                                           ; network mode, synchronous,
1838                                                                           ; out on rising/in on falling
1839                                                                           ; shift MSB first
1840                                                                           ; external clock source drives SCK
1841                                                                           ; (codec is master)
1842                                                                           ; RX frame sync pulses active for
1843                                                                           ; 1 bit clock immediately before
1844                                                                           ; transfer period
1845                                                                           ; positive frame sync polarity
1846                                                                           ; frame sync length is 1-bit
1847   
1848                                                                           ; Configure GPIO pins -- (functionality and direction
)
1849      P:00011D 07F43F            movep             #$0000,x:M_PCRC         ; Enable GPIO pin 0 SC00=CODEC_RESET
                   000000
1850      P:00011F 07F42F            movep             #$0000,x:M_PCRD         ; Enable GPIO CSS (pin 0),CCLK (pin 1), CDIN (pin 2)
                   000000
1851   
1852      P:000121 07F43E            movep             #$0001,x:M_PRRC         ; set PC0=CODEC_RESET~ as output
                   000001
1853      P:000123 07F42E            movep             #$0007,x:M_PRRD         ; set PD0=CCS~ as output
                   000007
1854                                                                           ; set PD1=CCLK as output
1855                                                                           ; set PD2=CDIN as output
1856   
1857                       ; Codec Reset
1858      P:000125 013D00            bclr    #CODEC_RESET,x:M_PDRC             ; assert CODEC_RESET~
1859      P:000126 012D00            bclr    #CCS,x:M_PDRD                     ; assert CCS~ -- allows control register to be writte
n to
1860   
1861                                                                           ; Delay to allow Codec to reset
1862      P:000127 06E883            do      #1000,_delay_loop
                   00012A
1863      P:000129 06E8A3            rep     #1000                             ; minimum 50 ms delay
1864      P:00012A 000000            nop
1865                       _delay_loop
1866   
1867   
1868                       ; Setting up to send Codec control information
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 15



1869      P:00012B 013D20            bset    #CODEC_RESET,x:M_PDRC             ; deassert CODEC_RESET~
1870   
1871   
1872                                                                           ; Sending control words
1873                       set_control
1874      P:00012C 44F400            move              #CTRL_WD_12,x0          ; transfer control value to control variable
                   000300
1875      P:00012E 447000            move              x0,x:CTRL_WD_HI
                   000619
1876      P:000130 240000            move              #CTRL_WD_34,x0
1877      P:000131 447000            move              x0,x:CTRL_WD_LO
                   00061A
1878      P:000133 0BF080            jsr     codec_control                     ; send in dummy control information
                   00013D
1879      P:000135 0BF080            jsr     codec_control                     ; send in correct control information
                   00013D
1880   
1881   
1882                                                                           ; Set and enable interrupts
1883      P:000137 08F4BE            movep             #$000c,x:M_IPRP         ; set interrupt priority level for ESSI0 to 3
                   00000C
1884      P:000139 00FCB8            andi    #$fc,mr                           ; enable interrupts
1885   
1886                                                                           ; Set ESSI functionality
1887      P:00013A 07F43F            movep             #$003e,x:M_PCRC         ; enable ESSI0 except SC00=CODEC_RESET
                   00003E
1888   
1889      P:00013C 00000C            rts
1890   
1891   
1892                       ;-------------------------------------------------------------
1893                       ; codec_control routine
1894                       ;       Input:  CTRL_WD_LO and CTRL_WD_HI
1895                       ;       Output: CDIN
1896                       ;       Description: Used to send control information to CODEC
1897                       ;       NOTE: does not preserve the 'a' register.
1898                       ;-------------------------------------------------------------
1899                       codec_control
1900      P:00013D 200013            clr     a
1901      P:00013E 012D00            bclr    #CCS,x:M_PDRD                     ; assert CCS
1902      P:00013F 54F000            move              x:CTRL_WD_HI,a1         ; upper 16 bits of control data
                   000619
1903      P:000141 0BF080            jsr     send_codec                        ; shift out upper control word
                   000149
1904      P:000143 54F000            move              x:CTRL_WD_LO,a1         ; lower 16 bits of control data
                   00061A
1905      P:000145 0BF080            jsr     send_codec                        ; shift out lower control word
                   000149
1906      P:000147 012D20            bset    #CCS,x:M_PDRD                     ; deassert CCS
1907      P:000148 00000C            rts
1908   
1909   
1910                       ;---------------------------------------------------------------
1911                       ; send_codec routine
1912                       ;       Input:  a1 containing control information
1913                       ;       Output: sends bits to CDIN
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 16



1914                       ;       Description: Determines bits to send to CDIN
1915                       ;---------------------------------------------------------------
1916   
1917                       send_codec
1918      P:000149 061080            do      #16,end_send_codec                ; 16 bits per word
                   000155
1919      P:00014B 012D21            bset    #CCLK,x:M_PDRD                    ; toggle CCLK clock high
1920      P:00014C 0ACC17            jclr    #23,a1,bit_low                    ; test msb
                   000151
1921      P:00014E 012D22            bset    #CDIN,x:M_PDRD                    ; send high into CDIN
1922      P:00014F 0AF080            jmp     continue
                   000152
1923                       bit_low
1924      P:000151 012D02            bclr    #CDIN,x:M_PDRD                    ; send low into CDIN
1925                       continue
1926      P:000152 0602A0            rep     #2                                ; delay
1927      P:000153 000000            nop
1928      P:000154 012D01            bclr    #CCLK,x:M_PDRD                    ; restart cycle
1929      P:000155 200033            lsl     a                                 ; shift control word to 1 bit
1930                                                                           ; to left
1931                       end_send_codec
1932      P:000156 00000C            rts
1933   
1934   
1935   
1936   
1937                       ;****************************************************************************
1938                       ;       SSI0_ISR.ASM    Ver.2.0
1939                       ;       Example program to handle interrupts through
1940                       ;       the 56307 SSI0 to move audio through the CS4218
1941                       ;
1942                       ;       Copyright (c) MOTOROLA 1995, 1996, 1997, 1998
1943                       ;                     Semiconductor Products Sector
1944                       ;                     Digital Signal Processing Division
1945                       ;
1946                       ;
1947                       ;       History:
1948                       ;                       14 June 1996: RLR/LJD - ver 1.0
1949                       ;                       23 July 1997: BEA     - ver 1.1
1950                       ;                       1  june 2001: Dany
1951                       ;******************************************************************************
1952   
1953   
1954                       ;----the actual interrupt service routines (ISRs)  follow:
1955   
1956                       ;************************ SSI TRANSMIT ISR *********************************
1957                       ssi_txe_isr
1958      P:000157 013704            bclr    #4,x:M_SSISR0                     ; Read SSISR to clear exception flag
1959                                                                           ; explicitly clears underrun flag
1960                       ssi_tx_isr
1961   
1962      P:000158 000004            rti
1963   
1964   
1965   
1966                       ;********************* SSI TRANSMIT LAST SLOT ISR **************************
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 17



1967                       ssi_txls_isr
1968      P:000159 0A0020            bset    #Left_ch,x:bits
1969      P:00015A 000004            rti
1970   
1971                       ;************************** SSI receive ISR ********************************
1972                       ssi_rxe_isr
1973      P:00015B 013705            bclr    #5,x:M_SSISR0                     ; Read SSISR to clear exception flag
1974                                                                           ; explicitly clears overrun flag
1975                       ssi_rx_isr
1976   
1977      P:00015C 0444D8            movep             x:M_RX0,x0              ; Read a/d data
1978      P:00015D 0A0080            jclr    #Left_ch,X:bits,esright
                   00016F
1979   
1980                       ;=====================================
1981      P:00015F 0B8900            bchg    #0,x:M_HDR
1982      P:000160 000000            nop
1983      P:000161 000000            nop
1984      P:000162 000000            nop
1985      P:000163 08F489            movep             #$0001,X:M_HDR          ;1->PB0, sube el pin
                   000001
1986                                 fir     ntaps                             ;do fir
1987  +                    fir       ident   1,0
1988  +                    ;
1989  +                    ;       FIR - direct form FIR filter
1990  +                    ;
1991  +                    ;       FIR filter macro
1992  +                    ;
1993  +
1994  +
1995  +
1996  +   P:000165 F01813            clr     a         x0,x:(r0)+  y:(r4)+,y0  ;save first state
1997  +   P:000166 0618A2            rep     #ntaps-1
1998  +   P:000167 F098D2            mac     x0,y0,a   x:(r0)+,x0  y:(r4)+,y0
1999  +   P:000168 2050D3            macr    x0,y0,a   (r0)-
2000  +
2001  +
2002  +
2003  +
2004      P:000169 08F489            movep             #$0000,X:M_HDR          ;0->PB0, baja el pin
                   000000
2005                       ;=====================================
2006      P:00016B 000000            nop
2007      P:00016C 21C400            move              a,x0
2008      P:00016D 0AF080            jmp     endisr
                   000170
2009   
2010   
2011      P:00016F 240000  esright   move              #0,x0                   ;mute the other channel
2012   
2013      P:000170 04C4DC  endisr    movep             x0,x:M_TX00             ; write d/a data
2014      P:000171 0B0000            bchg    #Left_ch,x:bits
2015      P:000172 000004            rti
2016   
2017   
2018   
Motorola DSP56300 Assembler  Version 6.2.0   120-10-11  19:25:11  ada_init.asm  Page 18



2019                       ;********************** SSI receive last slot ISR **************************
2020                       ssi_rxls_isr
2021   
2022   
2023      P:000173 000004            rti
2024   
2025                                 end

0    Errors
0    Warnings


